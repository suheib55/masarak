import{r as d,Q as f,o,b as F,w as $,d as t,u as h,c as l,t as c,e as y,v as g,f as m,F as D,g as E,N as p}from"./app-6ead19b6.js";import{_ as B}from"./MainLayout-70b4c895.js";const P={class:"max-w-4xl mx-auto p-6"},U={key:0,class:"mb-8 bg-white border rounded-lg p-5 shadow-sm"},V={key:0},j=["disabled"],S={key:1,class:"space-y-4"},L={class:"flex justify-between items-center mb-2"},T={class:"text-xl font-semibold text-purple-800"},I={class:"text-xs text-gray-500"},M={class:"text-gray-700"},Q={class:"text-sm text-gray-500 mt-2 italic"},q={key:0,class:"flex gap-4 mt-3"},z=["onClick"],G=["onClick"],H={key:2,class:"text-center text-gray-500 mt-10"},R={__name:"Announcements",setup(J){const x=d(f().props.announcements||[]),a=d(""),u=d(""),i=d(!1),v=d(!1),r=d(null),_=f().props.auth.user.email,w=_.includes("@just.edu.jo");function k(){if(!a.value||!u.value){alert("Please fill in all fields");return}v.value=!0;const n={title:a.value,content:u.value};r.value?p.put(`/announcements/${r.value}`,n,{onFinish:()=>b()}):p.post("/announcements",n,{onFinish:()=>b()})}function b(){a.value="",u.value="",r.value=null,i.value=!1,v.value=!1}function C(n){a.value=n.title,u.value=n.content,r.value=n.id,i.value=!0}function A(n){confirm("Are you sure you want to delete this announcement?")&&p.delete(`/announcements/${n}`)}return(n,s)=>(o(),F(B,null,{default:$(()=>[t("div",P,[s[3]||(s[3]=t("h1",{class:"text-3xl font-bold text-purple-800 mb-6 text-center"},"University Announcements",-1)),h(w)?(o(),l("div",U,[t("button",{onClick:s[0]||(s[0]=e=>i.value=!i.value),class:"bg-purple-700 text-white px-4 py-2 rounded hover:bg-purple-600 mb-4"},c(i.value?"Cancel":r.value?"Cancel Edit":"+ New Announcement"),1),i.value?(o(),l("div",V,[y(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.value=e),type:"text",placeholder:"Title",class:"w-full border px-4 py-2 rounded mb-3"},null,512),[[g,a.value]]),y(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=e=>u.value=e),rows:"4",placeholder:"Content",class:"w-full border px-4 py-2 rounded mb-3"},null,512),[[g,u.value]]),t("button",{onClick:k,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-500",disabled:v.value},c(v.value?"Saving...":r.value?"Update Announcement":"Post Announcement"),9,j)])):m("",!0)])):m("",!0),x.value.length?(o(),l("div",S,[(o(!0),l(D,null,E(x.value,e=>(o(),l("div",{key:e.id,class:"bg-white border rounded-lg p-5 shadow-sm hover:shadow transition"},[t("div",L,[t("h2",T,c(e.title),1),t("span",I,c(e.created_at?new Date(e.created_at).toLocaleDateString():"No date available"),1)]),t("p",M,c(e.content),1),t("p",Q,"Posted by: "+c(e.posted_by),1),e.posted_by===h(_)?(o(),l("div",q,[t("button",{onClick:N=>C(e),class:"text-blue-600 text-sm hover:underline"},"Edit",8,z),t("button",{onClick:N=>A(e.id),class:"text-red-600 text-sm hover:underline"},"Delete",8,G)])):m("",!0)]))),128))])):(o(),l("div",H,"No announcements yet."))])]),_:1}))}};export{R as default};
