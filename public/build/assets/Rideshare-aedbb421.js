import{Q as O,r as u,p as J,o as l,b as W,w as X,d as e,e as i,m as D,c as o,g as x,F as y,f as p,t as a,v as N,i as g,u as T,N as v,n as ee}from"./app-6ead19b6.js";import{_ as te}from"./MainLayout-70b4c895.js";const se={class:"p-6 max-w-xl mx-auto"},le={class:"text-center mb-6"},oe={class:"mb-4"},ne=["value"],ae={key:0,class:"mb-4"},re=["value"],ue={key:1,class:"text-center mb-6"},de={key:2},ie={key:0,class:"space-y-4"},pe={class:"text-lg font-semibold text-purple-700"},ve={class:"text-gray-700"},me={class:"text-gray-700"},be={class:"text-gray-700"},ce={class:"text-gray-700 mb-2"},xe={class:"flex gap-3"},ye=["onClick"],ge={key:1,class:"text-red-600 font-semibold text-sm"},fe=["onClick"],we={key:1,class:"text-center text-gray-500 mt-4"},he={key:3,class:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"},ke={class:"bg-white rounded-lg p-6 w-full max-w-md shadow-lg"},Ce={class:"text-xl font-bold text-purple-700 mb-4 text-center"},_e={class:"flex justify-end gap-3"},Ae=["disabled"],Re={key:4,class:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"},Se={class:"bg-white rounded-lg p-6 w-full max-w-lg shadow-lg"},De={class:"mt-4"},Ne={key:0},Fe=["onClick"],Me={key:1,class:"text-sm text-gray-500"},Ue={class:"flex justify-between items-center mt-6"},Ve={key:5,class:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"},je={class:"bg-white rounded-lg p-6 w-full max-w-md shadow-lg"},Pe=["value"],$e=["disabled"],Ee=["value"],Je={class:"flex justify-end gap-3"},Le={__name:"Rideshare",props:{rides:Array},setup(z){var P;const f=((P=O().props.auth)==null?void 0:P.user)||{},U=z,w={Irbid:["Al-Husn","Culture Roundabout","Eastern Neighborhood","University Street","Al-Sareeh","Kufr Yuba","Idoun"],Zarqa:["New Zarqa","Downtown","Jabal Tareq","Ramzi District","Prince Mohammad City","Street 36","Al-Madina District"],Amman:["Abdali","Swifeih","Shmeisani","Rabyeh","Jabal Al-Hussein","Bayader","Marj Al-Hamam","Tabarbour"]},m=u(""),h=u(""),V=u(!1),F=u(!1),M=u(!1),r=u(null),b=u(""),j=J(()=>Array.isArray(U.rides)?U.rides.filter(n=>n.city.toLowerCase()===m.value.toLowerCase()&&n.area.toLowerCase()===h.value.toLowerCase()):[]);function B(){V.value=!0}function L(n){r.value=n,b.value="",F.value=!0}function q(n){r.value=n,M.value=!0}function k(){F.value=!1,M.value=!1,r.value=null}function H(){if(!f.name||!b.value||!r.value)return;const n=new FormData;n.append("ride_id",r.value.id),n.append("passenger_name",f.name),n.append("phone",b.value),v.post("/rides/join",n,{onSuccess:()=>{k(),v.reload({only:["rides"]})},onError:()=>{alert("Error joining ride")}})}function Y(n){confirm("Are you sure you want to remove this passenger?")&&v.delete(`/rides/${n}/passenger`,{onSuccess:()=>v.reload({only:["rides"]}),onError:()=>alert("Failed to remove passenger")})}function I(n){confirm("Are you sure you want to delete this ride?")&&v.delete(`/rides/${n}`,{onSuccess:()=>{k(),v.reload({only:["rides"]})},onError:()=>alert("Failed to delete ride")})}const C=u(!1),c=u(""),_=u(""),A=u(""),R=u(""),S=u(4),Z=J(()=>w[c.value]||[]);function K(){const n=new FormData;n.append("city",c.value),n.append("area",_.value),n.append("time",A.value),n.append("seats",S.value),n.append("phone",R.value),v.post("/rides",n,{onSuccess:()=>{C.value=!1,Q(),v.reload({only:["rides"]})},onError:()=>{alert("Error creating ride")}})}function Q(){c.value="",_.value="",A.value="",S.value=4,R.value=""}return(n,t)=>(l(),W(te,null,{default:X(()=>{var $,E;return[e("div",se,[t[27]||(t[27]=e("h1",{class:"text-3xl font-bold text-purple-800 mb-6 text-center"},"Find a Rideshare",-1)),e("div",le,[e("button",{onClick:t[0]||(t[0]=s=>C.value=!0),class:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-500"}," + Create Ride ")]),e("div",oe,[t[12]||(t[12]=e("label",{class:"block mb-1 font-medium text-gray-700"},"Select City:",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),class:"w-full border rounded px-4 py-2"},[t[11]||(t[11]=e("option",{value:""},"-- Choose a city --",-1)),(l(),o(y,null,x(w,(s,d)=>e("option",{key:d,value:d},a(d),9,ne)),64))],512),[[D,m.value]])]),m.value?(l(),o("div",ae,[t[14]||(t[14]=e("label",{class:"block mb-1 font-medium text-gray-700"},"Select Area:",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>h.value=s),class:"w-full border rounded px-4 py-2"},[t[13]||(t[13]=e("option",{value:""},"-- Choose an area --",-1)),(l(!0),o(y,null,x(w[m.value],s=>(l(),o("option",{key:s,value:s},a(s),9,re))),128))],512),[[D,h.value]])])):p("",!0),m.value&&h.value?(l(),o("div",ue,[e("button",{onClick:B,class:"bg-purple-700 text-white px-6 py-2 rounded hover:bg-purple-600"}," Search for Rides ")])):p("",!0),V.value?(l(),o("div",de,[t[16]||(t[16]=e("h2",{class:"text-xl font-semibold text-purple-800 mb-4 text-center"},"Available Rides",-1)),j.value.length?(l(),o("div",ie,[(l(!0),o(y,null,x(j.value,s=>{var d;return l(),o("div",{key:s.id,class:"bg-white border p-4 rounded shadow"},[e("p",pe,"Driver: "+a(((d=s.user)==null?void 0:d.name)||"Unknown"),1),e("p",ve,"From: "+a(s.area)+", "+a(s.city),1),e("p",me,"Time: "+a(s.time),1),e("p",be,"Phone: "+a(s.phone),1),e("p",ce,[t[15]||(t[15]=g(" Available Seats: ")),e("span",{class:ee({"text-red-600 font-semibold":s.seats===0})},a(s.seats===0?"Full":s.seats),3)]),e("div",xe,[s.seats>0?(l(),o("button",{key:0,onClick:G=>L(s),class:"border border-green-600 text-green-600 px-4 py-1 rounded hover:bg-green-100 text-sm"}," Join ",8,ye)):(l(),o("span",ge,"Full")),e("button",{onClick:G=>q(s),class:"bg-gray-200 text-sm px-4 py-1 rounded hover:bg-gray-300"}," Show Details ",8,fe)])])}),128))])):(l(),o("div",we," No rides found for selected area. "))])):p("",!0),F.value?(l(),o("div",he,[e("div",ke,[e("h2",Ce," Join Ride with "+a(($=r.value.user)==null?void 0:$.name),1),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>b.value=s),type:"text",placeholder:"Your Phone Number",class:"w-full mb-4 px-4 py-2 border rounded"},null,512),[[N,b.value]]),e("div",_e,[e("button",{onClick:k,class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400 text-gray-800"}," Cancel "),e("button",{onClick:H,disabled:!b.value,class:"bg-purple-700 text-white px-4 py-2 rounded hover:bg-purple-600 disabled:opacity-50"}," Confirm ",8,Ae)])])])):p("",!0),M.value?(l(),o("div",Re,[e("div",Se,[t[23]||(t[23]=e("h2",{class:"text-xl font-bold text-purple-700 mb-4 text-center"},"Ride Details",-1)),e("p",null,[t[17]||(t[17]=e("strong",null,"Driver:",-1)),g(" "+a((E=r.value.user)==null?void 0:E.name),1)]),e("p",null,[t[18]||(t[18]=e("strong",null,"City:",-1)),g(" "+a(r.value.city),1)]),e("p",null,[t[19]||(t[19]=e("strong",null,"Area:",-1)),g(" "+a(r.value.area),1)]),e("p",null,[t[20]||(t[20]=e("strong",null,"Time:",-1)),g(" "+a(r.value.time),1)]),e("p",null,[t[21]||(t[21]=e("strong",null,"Phone:",-1)),g(" "+a(r.value.phone),1)]),e("div",De,[t[22]||(t[22]=e("h3",{class:"font-semibold text-gray-800 mb-2"},"Passengers:",-1)),r.value.passengers&&r.value.passengers.length?(l(),o("ul",Ne,[(l(!0),o(y,null,x(r.value.passengers,s=>(l(),o("li",{key:s.id,class:"text-sm text-gray-700 flex justify-between items-center"},[e("span",null,"â€¢ "+a(s.passenger_name)+" ("+a(s.phone)+")",1),T(f).id===r.value.user_id?(l(),o("button",{key:0,onClick:d=>Y(s.id),class:"text-red-600 hover:text-red-800 text-xs ml-2"}," Remove ",8,Fe)):p("",!0)]))),128))])):(l(),o("p",Me,"No passengers yet."))]),e("div",Ue,[T(f).id===r.value.user_id?(l(),o("button",{key:0,onClick:t[4]||(t[4]=s=>I(r.value.id)),class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-500"}," Delete Ride ")):p("",!0),e("button",{onClick:k,class:"bg-purple-700 text-white px-6 py-2 rounded hover:bg-purple-600"}," Close ")])])])):p("",!0),C.value?(l(),o("div",Ve,[e("div",je,[t[26]||(t[26]=e("h2",{class:"text-xl font-bold text-green-700 mb-4 text-center"},"Create New Ride",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>R.value=s),type:"text",placeholder:"Your Phone Number",class:"w-full mb-3 px-4 py-2 border rounded"},null,512),[[N,R.value]]),i(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>c.value=s),class:"w-full mb-3 px-4 py-2 border rounded"},[t[24]||(t[24]=e("option",{value:""},"Select City",-1)),(l(),o(y,null,x(w,(s,d)=>e("option",{key:d,value:d},a(d),9,Pe)),64))],512),[[D,c.value]]),i(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>_.value=s),class:"w-full mb-3 px-4 py-2 border rounded",disabled:!c.value},[t[25]||(t[25]=e("option",{value:""},"Select Area",-1)),(l(!0),o(y,null,x(Z.value,s=>(l(),o("option",{key:s,value:s},a(s),9,Ee))),128))],8,$e),[[D,_.value]]),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>A.value=s),type:"time",class:"w-full mb-3 px-4 py-2 border rounded"},null,512),[[N,A.value]]),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>S.value=s),type:"number",min:"1",max:"10",placeholder:"Seats",class:"w-full mb-4 px-4 py-2 border rounded"},null,512),[[N,S.value]]),e("div",Je,[e("button",{onClick:t[10]||(t[10]=s=>C.value=!1),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400 text-gray-800"}," Cancel "),e("button",{onClick:K,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-500"}," Create ")])])])):p("",!0)])]}),_:1}))}};export{Le as default};
